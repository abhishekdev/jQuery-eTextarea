/*

 jQuery eTextarea - v1.0.2 - 29/Aug/2011 
 Copyright (C) 2011 by Abhishek Dev
 MIT License @ http://bit.ly/abhishekdevMIT-License
*/
(function(e){e.fn.eTextarea=function(p){return this.each(function(D,w){function x(){a.addClass(k["class"]);(k.emulateTextbox||parseInt(a.attr("rows"),g)===1)&&a.addClass(k.oneLineClass);k.resize||a.addClass("noResize").css("resize","none")}function A(){a.unbind("focus"+f).bind("focus"+f,function(){q();y();m=!0})}function B(){a.unbind("blur"+f).bind("blur"+f,function(){m=!1;r()})}function C(){a.unbind("change.eTextarea cut.eTextarea input.eTextarea paste.eTextarea").bind("change.eTextarea cut.eTextarea",
function(){i()}).bind("input.eTextarea paste.eTextarea",function(){setTimeout(i,250)})}function s(n,c){var d=Math.floor(parseInt(c,g)),b=a.height();if(b!=d||b==j)typeof n==="string"?a.css({overflow:n,height:d+"px"}):a.css({overflowX:n.x,overflowY:n.y,height:d+"px"})}var a,t,j,u,z,d,l,v,b,h,q,r,y,o,i,k,g=10,f=".eTextarea",m=!1;if(w.type!="textarea")return!1;a=e(w);k=typeof p=="object"?e.extend({},e.fn.eTextarea.defaults,p):e.fn.eTextarea.defaults;x();t=parseInt(a.css("min-height"),g)||parseInt(a.css("height"),
g);j=parseInt(a.css("max-height"),g);u=parseInt(a.css("line-height"),g)||parseInt(a.css("font-size"),g);if(j<0)j=Number.MAX_VALUE;a.css({overflowY:"hidden",overflowX:"auto"});q=function(){m?d.detach():(z=""+a.attr("id")+"_flexi_"+Math.floor(Math.random()*99999),d=e("<div></div>",{id:z,"class":"eTextarea"}));l=e("#eTextareaTrack");v=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","fontFamily","fontWeight","width","lineHeight"];l.length||(l=e("<div></div>",{id:"eTextareaTrack"}),
e("body").append(l));d.css({position:"absolute",top:0,left:"-9999px","word-wrap":"break-word"});for(var b=0;b<v.length;++b){var c=v[b];d.css(c,a.css(c))}d.css("overflowX","auto");l.append(d)};r=function(){m||(a.unbind("keyup.eTextarea"),a.unbind("keypress.eTextarea"),d.remove(),d=null)};o=function(){var b=a.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),c=d.html();b+"&nbsp;"!=c&&(d.html(b+"&nbsp;"),c=d.height(),b=a.height(),c=c>u?c+u:c,Math.abs(c-
b)>3&&(c>j?s({x:"hidden",y:"auto"},j):c<=t?s({x:"hidden",y:"hidden"},t):s({x:"hidden",y:"hidden"},c)))};y=function(){b=null;h=!1;a.unbind("keyup"+f).bind("keyup.eTextarea"+f,function(){h||(clearTimeout(b),b=null,b=setTimeout(function(){clearTimeout(b);b=null;o();h=!1},150),h=!0)});a.unbind("keypress"+f).bind("keypress"+f,function(){h||(clearTimeout(b),b=null,b=setTimeout(function(){clearTimeout(b);b=null;o();h=!1},150),h=!0)})};i=function(){q();o();r()};p=="update"&&i?i():(x(),i(),A(),B(),C())})};
e.fn.eTextarea.defaults={resize:!0,"class":"ui-eTextarea",emulateTextbox:!1,oneLineClass:"oneLine"}})(jQuery);
