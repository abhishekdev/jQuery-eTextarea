/*

 jQuery eTextarea - v1.0.1 - 02/Jun/2011 
 Copyright (C) 2011 by Abhishek Dev
 MIT License @ http://bit.ly/abhishekdevMIT-License
*/
(function(a){a.fn.eTextarea=function(o){return this.each(function(C,v){function w(){b.addClass(j["class"]);(j.emulateTextbox||parseInt(b.attr("rows"),f)===1)&&b.addClass(j.oneLineClass);j.resize||b.addClass("noResize").css("resize","none")}function z(){b.unbind("focus"+e).bind("focus"+e,function(){p();x()})}function A(){b.unbind("blur"+e).bind("blur"+e,function(){a("#status").text("blur trig");q()})}function B(){b.unbind("change.eTextarea cut.eTextarea input.eTextarea paste.eTextarea").bind("change.eTextarea cut.eTextarea",
function(){h()}).bind("input.eTextarea paste.eTextarea",function(){setTimeout(h,250)})}function r(l,m){var a=Math.floor(parseInt(m,f)),c=b.height();if(c!=a||c==i)typeof l==="string"?b.css({overflow:l,height:a+"px"}):b.css({overflowX:l.x,overflowY:l.y,height:a+"px"})}var b,s,i,t,y,d,k,u,c,g,p,q,x,n,h,j,f=10,e="eTextarea";if(v.type!="textarea")return!1;b=a(v);j=typeof o=="object"?a.extend({},a.fn.eTextarea.defaults,o):a.fn.eTextarea.defaults;w();s=parseInt(b.css("min-height"),f)||parseInt(b.css("height"),
f);i=parseInt(b.css("max-height"),f);t=parseInt(b.css("line-height"),f)||parseInt(b.css("font-size"),f);if(i<0)i=Number.MAX_VALUE;b.css({overflow:"hidden",overflowX:"auto"});p=function(){y=""+b.attr("id")+"_flexi_"+Math.floor(Math.random()*99999);d=a("<div></div>",{id:y,"class":"eTextarea"});k=a("#eTextareaTrack");u=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","fontFamily","fontWeight","width","lineHeight"];k.length||(k=a("<div></div>",{id:"eTextareaTrack"}),a("body").append(k));
k.append(d);d.css({position:"absolute",top:0,left:"-9999px","word-wrap":"break-word"});for(var c=0;c<u.length;++c){var m=u[c];d.css(m,b.css(m))}d.css("overflowX","auto")};q=function(){b.unbind("keyup.eTextarea");b.unbind("keypress.eTextarea");d.remove()};n=function(){var c=b.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),a=d.html();c+"&nbsp;"!=a&&(d.html(c+"&nbsp;"),a=d.height(),c=b.height(),a=a>t?a+t:a,Math.abs(a-c)>3&&(a>i?r({x:"hidden",y:"auto"},
i):a<=s?r({x:"hidden",y:"hidden"},s):r({x:"hidden",y:"hidden"},a)))};x=function(){c=null;g=!1;b.unbind("keyup"+e).bind("keyup.eTextarea"+e,function(){g||(clearTimeout(c),c=null,c=setTimeout(function(){clearTimeout(c);c=null;n();g=!1},150),g=!0)});b.unbind("keypress"+e).bind("keypress"+e,function(){g||(clearTimeout(c),c=null,c=setTimeout(function(){clearTimeout(c);c=null;n();g=!1},150),g=!0)})};h=function(){p();n();q()};o=="update"&&h?h():(w(),h(),z(),A(),B())})};a.fn.eTextarea.defaults={resize:!0,
"class":"ui-eTextarea",emulateTextbox:!1,oneLineClass:"oneLine"}})(jQuery);
