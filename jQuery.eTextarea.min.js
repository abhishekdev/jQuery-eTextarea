/*

 jQuery eTextarea - v1.0.1 - 02/Jun/2011 
 Copyright (C) 2011 by Abhishek Dev
 MIT License @ http://bit.ly/abhishekdevMIT-License
*/
(function(a){a.fn.eTextarea=function(n){return this.each(function(B,u){function v(){b.addClass(i["class"]);(i.emulateTextbox||parseInt(b.attr("rows"),e)===1)&&b.addClass(i.oneLineClass);i.resize||b.addClass("noResize").css("resize","none")}function y(){b.unbind("focus.eTextarea").bind("focus.eTextarea",function(){o();w()})}function z(){b.unbind("blur.eTextarea").bind("blur.eTextarea",function(){a("#status").text("blur trig");p()})}function A(){b.unbind("change.eTextarea cut.eTextarea input.eTextarea paste.eTextarea").bind("change.eTextarea cut.eTextarea",
function(){g()}).bind("input.eTextarea paste.eTextarea",function(){setTimeout(g,250)})}function q(k,l){var a=Math.floor(parseInt(l,e)),c=b.height();if(c!=a||c==h)typeof k==="string"?b.css({overflow:k,height:a+"px"}):b.css({overflowX:k.x,overflowY:k.y,height:a+"px"})}var b,r,h,s,x,d,j,t,c,f,o,p,w,m,g,i,e=10;if(u.type!="textarea")return!1;b=a(u);i=typeof n=="object"?a.extend({},a.fn.eTextarea.defaults,n):a.fn.eTextarea.defaults;v();r=parseInt(b.css("min-height"),e)||parseInt(b.css("height"),e);h=parseInt(b.css("max-height"),
e);s=parseInt(b.css("line-height"),e)||parseInt(b.css("font-size"),e);if(h<0)h=Number.MAX_VALUE;b.css({overflow:"hidden",overflowX:"auto"});o=function(){x=""+b.attr("id")+"_flexi_"+Math.floor(Math.random()*99999);d=a("<div></div>",{id:x,"class":"eTextarea"});j=a("#eTextareaTrack");t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","fontFamily","fontWeight","width","lineHeight"];j.length||(j=a("<div></div>",{id:"eTextareaTrack"}),a("body").append(j));j.append(d);d.css({position:"absolute",
top:0,left:"-9999px","word-wrap":"break-word"});for(var c=0;c<t.length;++c){var l=t[c];d.css(l,b.css(l))}d.css("overflowX","auto")};p=function(){b.unbind("keyup.eTextarea");b.unbind("keypress.eTextarea");d.remove()};m=function(){var c=b.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),a=d.html();c+"&nbsp;"!=a&&(d.html(c+"&nbsp;"),a=d.height(),c=b.height(),a=a>s?a+s:a,Math.abs(a-c)>3&&(a>h?q({x:"hidden",y:"auto"},h):a<=r?q({x:"hidden",y:"hidden"},r):
q({x:"hidden",y:"hidden"},a)))};w=function(){c=null;f=!1;b.unbind("keyup.eTextarea").bind("keyup.eTextarea",function(){f||(clearTimeout(c),c=null,c=setTimeout(function(){clearTimeout(c);c=null;m();f=!1},150),f=!0)});b.unbind("keypress.eTextarea").bind("keypress.eTextarea",function(){f||(clearTimeout(c),c=null,c=setTimeout(function(){clearTimeout(c);c=null;m();f=!1},150),f=!0)})};g=function(){o();m();p()};n=="update"&&g?g():(v(),g(),y(),z(),A())})};a.fn.eTextarea.defaults={resize:!0,"class":"ui-eTextarea",
emulateTextbox:!1,oneLineClass:"oneLine"}})(jQuery);
